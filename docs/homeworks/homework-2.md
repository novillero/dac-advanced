# Домашнее задание №2 «GIT для тех.писателя»

## Основное задание: работа с проектом

1. Склонируйте рабочий репозиторий нашего проекта [https://github.com/novillero/dac-advanced](https://github.com/novillero/dac-advanced){target=_blank}. 

2. Установите параметры пользователя (`user.email` и `user.name`).

3. Отколите рабочую ветку с названием `your-github-login-instruction`.

    !!! info "Внимание!"
        Независимо от регистра символов в вашем логине для названия файла используйте только маленькие буквы.

4. В папку `instructions` добавьте вашу пошаговую инструкцию в формате markdown. Назовите файл `your-github-login-instruction.md` (используйте только маленькие буквы).

5. Сохраните изменения, добавьте их в индекс, создайте коммит, опубликуйте ветку и отправьте изменения в удалённый репозиторий.

7. Перейдите в [GitHub → Pull requests](https://github.com/novillero/dac-advanced/pulls) и создайте Pull Request из вашей рабочей ветки в ветку `master`.

    Не забудьте добавить название и описание пулл реквеста.

8. Отправьте ссылку на пулл реквест в чат курса.

Постарайтесь выполнить задание самостоятельно, используя материалы занятия и [памятку по GIT](../git-for-tech-writer.md).

Если у вас возникли вопросы, вы можете посмотреть пошаговое описание в методике выполнения:

??? note "Методика выполнения"

    1. Склонируйте репозиторий себе на устройство:

        ```
        git clone https://github.com/novillero/dac-advanced.git
        ```

    2. Откройте рабочую директорию склонированного репозитория в VS Code.

    3. Откройте терминал в VS Code (вкладка «Terminal» в верхнем меню).

    4. Установите параметры пользователя в текущем репозитории:

        ```
        git config user.email my-address@mail.com
        git config user.name "my-name"
        ```

    5. Убедитесь, что вы находитесь в ветке `master`. Для этого выполните команду `git status`.


    6. Отколите новую ветку с помощью команды `git branch название-ветки` и переключитесь на неё с помощью команды `git switch название-ветки`

        Назовите ветку `your-github-login-instruction`. Независимо от регистра символов в вашем логине для названия файла используйте только маленькие буквы.

    7. Перейдите в папку `instructions` и добавьте в неё md-файл с пошаговой инструкцией из домашнего задания №1. Назовите файл `your-github-login-instruction.md`. Независимо от регистра символов в вашем логине для названия файла используйте только маленькие буквы.

    8. Сохраните изменения в рабочей директории (`ctrl+s`) и добавьте изменения в индекс: выполните команду `git add .`

    9. Проверьте, что изменения попали в индекс: проверьте статус проекта.

    10. Создайте коммит:

        ```
        git commit -m "Описание внесенных изменений"
        ```

    11. Опубликуйте ветку и отправьте коммит в удалённый репозиторий. Для этого выполните команду `git push` с флагом `--set-upstream`:

        ```
        git push --set-upstream origin название-вашей-ветки
        ```

    12. Откройте репозиторий в GitHub: [https://github.com/novillero/dac-advanced](https://github.com/novillero/dac-advanced){target=_blank}.

    13. Перейдите на вкладку **Pull requests** и нажмите кнопку **New pull request**.

    14. Укажите целевую и сливаемую ветки: в списке «Base» оставьте ветку `master`, а в списке «Compare» выберите вашу рабочую ветку.

    15. Нажмите кнопку **Create pull request**.

    16. Добавьте название и описание пулл-реквеста: заполните поля «Add a title» и «Add a description».

    17. Нажмите кнопку **Create pull request**.

## Дополнительное задание: слияние веток и решение конфликта слияния

#### Подготовка новой ветки для слияния

1. Отколите ветку `your-github-login-test` от вашей рабочей ветки `your-github-login-instruction`.

2. Переключитесь на ветку `your-github-login-test`.

3. Откройте вашу инструкцию, отступите пустую строку от заголовка и добавьте текст:

    ```
    Эта инструкция создана в рамках мастер-класса по docs as code.
    ```

4. Сохраните изменения, добавьте их в индекс, создайте коммит, опубликуйте ветку и отправьте изменения в удалённый репозиторий.

5. Переключитесь на вашу рабочую ветку `your-github-login-instruction`.

6. Обновите ветку из удалённого репозитория командой `git pull`.

7. Откройте вашу инструкцию, отступите пустую строку от заголовка и добавьте текст:

    ```
    Это пошаговая инструкция о функциональности Telegram
    ```

8. Сохраните изменения, добавьте их в индекс, создайте коммит и отправьте его в удалённый репозиторий.

#### Слияние веток и решение конфликта

Теперь попробуйте влить изменения из ветки `your-github-login-test` в ветку `your-github-login-instruction`:

1. Во время ручного слияния вы должны находиться в целевой ветке. Убедитесь, что вы переключены на ветку `your-github-login-instruction`.

2. Для слияния выполните команду `git merge название-сливаемой-ветки`:

    ```
    git merge your-github-login-test
    ```

Система не сможет выполнить слияние из-за наличия конфликта в файле вашей инструкции:

```
CONFLICT (add/add): Merge conflict in docs/instructions/your-github-login-instruction.md
Automatic merge failed; fix conflicts and then commit the result.
```

Мы создали этот конфликт искусственно, намеренно добавив разные изменения в один и тот же файл в двух сливаемых ветках. В реальности конфликты могут возникать во время параллельной работы разных пользователей над одними и теми же файлами.

Решите конфликт одним из двух способов, самостоятельно выбрав вариант файла, который останется после слияния.

=== "Редактирование конфликтующих файлов"
    Этот вариант подойдёт в случае, когда вы не уверены в том, какая версия конфликтующего файла должна остаться.

    1. Выполните команду `git status`
        В ответе отобразятся конфликтующие файлы. Также они будут подсвечены красным в дереве рабочей директории в VS Code.
    2. Откройте конфликтующий файл. В файле выделены строки, в которых 
    3. Отредактируйте конфликтующие строки в файле.
    4. Сохраните изменения.
    5. Добавьте изменения в индекс: `git add название-конфликтующего-файла`
    6. Создайте коммит: `git commit -m "решение конфликта"`
    7. Конфликт решён, слияние выполнено. Теперь отправьте изменения на сервер: `git push`.

=== "Выбор версии конфликтующего файла"
    Этот вариант подойдёт в случае, когда вы точно знаете, какую версию конфликтующего файла нужно оставить.

    1. Выполните команду `git status`.

        В ответе отобразятся конфликтующие файлы. Также они будут подсвечены красным в дереве рабочей директории в VS Code.
        
    2. Для выбора версии конфликтующего файла используйте команду `git checkout` с флагами `--theirs/--ours`:

        * Флаг `theirs` сообщает о том, что после слияния должна остаться версия файла из сливаемой ветки:

            ```title="останется версия файла из ветки your-github-login-test"
            git checkout --theirs docs/instructions/your-github-login-instruction.md
            ```

        * Флаг `ours` сообщает о том, что после слияния должна остаться версия файла из целевой ветки:

            ```title="останется версия файла из ветки your-github-login-instruction"
            git checkout --ours docs/instructions/your-github-login-instruction.md
            ```
    
    3. Добавьте изменения в индекс: `git add название-конфликтующего-файла`
    4. Создайте коммит: `git commit -m "решение конфликта"`
    5. Конфликт решён, слияние выполнено. Теперь отправьте изменения на сервер: `git push`.

---

После решения конфликта и слияния веток проверьте, что всё прошло хорошо: откройте репозиторий в гитхабе и перейдите в пулл реквест, созданный на первом этапе домашней работы: на вкладке **Commits** должны появиться новые коммиты.











